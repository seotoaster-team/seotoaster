tinymce.PluginManager.add("stw",function(k,m){var b=function(){var b=[],h=[],g=[],d=[];$.ajax({type:"post",url:$("#website_url").val()+"backend/backend_content/loadwidgets/",success:function(c){for(var e in c)for(var f in c[e]){var a={type:"menuitem"};"undefined"!=typeof c[e][f].alias?("undefined"!=typeof c[e][f].group&&(a.type="nestedmenuitem",a.subtype=c[e][f].group.toLowerCase(),a.subtype=a.subtype.replace(/\s/g,""),-1===g.indexOf(a.subtype)&&(g.push(a.subtype),d.push(c[e][f].group))),a.text=c[e][f].alias,
a.value="{$"+c[e][f].option+"}"):(a.text=c[e][f],a.value="{$"+c[e][f]+"}");"menuitem"==a.type?b.push(a):h.push(a)}},dataType:"json"});return{widgetListMenuitem:b,widgetListNestedmenuitem:h,nestedmenuNames:g,nestedmenuNamesOrig:d}}();k.ui.registry.addMenuButton("stw",{text:"Useful shortcuts",fetch:function(l){var h=[];if(b.nestedmenuNames){var g=[],d;for(d in b.widgetListNestedmenuitem)g.push({type:b.widgetListNestedmenuitem[d].type,subtype:b.widgetListNestedmenuitem[d].subtype,text:b.widgetListNestedmenuitem[d].text,
value:b.widgetListNestedmenuitem[d].value});d={};for(var c=0;c<b.nestedmenuNames.length;d={tmpsubMenuArr:d.tmpsubMenuArr},c+=1){d.tmpsubMenuArr=[];for(var e in g)g[e].subtype==b.nestedmenuNames[c]&&d.tmpsubMenuArr.push({type:"menuitem",text:g[e].text,value:g[e].value,onSetup:function(a){var b=this;this.onAction=function(){k.insertContent(b.data.value)}}});var f={type:"nestedmenuitem",text:b.nestedmenuNamesOrig[c],getSubmenuItems:function(a){return function(){return a.tmpsubMenuArr}}(d)};h.push(f)}}for(var a in b.widgetListMenuitem)h.push({type:b.widgetListMenuitem[a].type,
text:b.widgetListMenuitem[a].text,value:b.widgetListMenuitem[a].value,onSetup:function(){var a=this;this.onAction=function(){k.insertContent(a.data.value)}}});l(h)}});return{getMetadata:function(){return{name:"stw plugin",url:""}}}});
