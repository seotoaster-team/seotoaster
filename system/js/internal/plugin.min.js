$(function(){$("#plugintab").tabs({active:0,beforeLoad:function(a,b){b.panel.addClass("plugins-list h425");b.ajaxSettings.dataFilter=function(a){b.panel.html($.parseJSON(a).pluginsList)}}});$(document).on("click",".plugin-control",function(){triggerPlugin("install",$(this))}).on("click",".plugin-endis",function(){triggerPlugin("onoff",$(this))}).on("click",".readme-plugin",function(){var a=$(this).data("name");$.post($("#website_url").val()+"backend/backend_plugin/readme/",{pluginName:a},function(b){b.error?
showMessage(b.responseText,!0):$('<div id="'+a+'-readme">',{"class":"readme-content content-footer"}).html(b.responseText).dialog({modal:!0,title:a,width:800,height:560,resizable:!1,draggable:!1,show:"clip",hide:"clip",buttons:[{text:"Okay",click:function(){$(this).dialog("close")}}]})},"json")})});function pluginCallback(){$.getJSON($("#website_url").val()+"backend/backend_plugin/list/",function(a){$(".plugins-list").html(a.pluginsList)})}
function triggerPlugin(a,b){var c=$("#website_url").val();$.ajax({url:"install"===a?c+"backend/backend_plugin/triggerinstall/":c+"backend/backend_plugin/trigger/",type:"post",dataType:"json",data:{name:b.data("name")},beforeSend:function(){showSpinner()},success:function(a){hideSpinner();a.error?showMessage(a.responseText,!0):pluginCallback()},error:function(a){showMessage(a,!0)}})};
