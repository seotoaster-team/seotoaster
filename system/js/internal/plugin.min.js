$(function(){$("#plugintab").tabs({active:0,beforeLoad:function(b,a){a.panel.addClass("plugins-list h425");a.ajaxSettings.dataFilter=function(b){a.panel.html($.parseJSON(b).pluginsList)};a.jqXHR.done(function(){})}});$(document).on("click",".plugin-control",function(){triggerPlugin("install",$(this))}).on("click",".plugin-endis",function(){triggerPlugin("onoff",$(this))}).on("click",".readme-plugin",function(){var b=$(this).data("name");$.post($("#website_url").val()+"backend/backend_plugin/readme/",
{pluginName:b},function(a){a.error?showMessage(a.responseText,!0):$('<div class="readme-content content-footer" id="'+b+'-readme">'+("undefined"==typeof a.responseText||"success"==a.responseText?"No readme for this plugin provided":a.responseText)+"</div>").dialog({modal:!0,title:b,width:800,height:560,resizable:!1,draggable:!1,show:"clip",hide:"clip",buttons:[{text:"Okay",click:function(){$(this).dialog("close")}}]})},"json")})});
function pluginCallback(){$.getJSON($("#website_url").val()+"backend/backend_plugin/list/",function(b){$(".plugins-list").html(b.pluginsList)})}
function triggerPlugin(b,a){var c=$("#website_url").val()+("install"==b?"backend/backend_plugin/triggerinstall/":"backend/backend_plugin/trigger/");$.ajax({url:c,type:"post",dataType:"json",data:{name:a.data("name")},beforeSend:function(){showSpinner()},success:function(a){hideSpinner();a.error?showMessage(a.responseText,!0):pluginCallback()},error:function(a){showMessage(a,!0)}})};
